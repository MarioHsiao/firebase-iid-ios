/* This file has been generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2015 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

int __fastcall +[FIRInstanceIDStringEncoding rfc4648Base64WebsafeStringEncoding](void *a1);
id __cdecl +[FIRInstanceIDStringEncoding stringEncodingWithString:](struct FIRInstanceIDStringEncoding *self, SEL, id);
id __cdecl -[FIRInstanceIDStringEncoding initWithString:](struct FIRInstanceIDStringEncoding *self, SEL, id);
id __cdecl -[FIRInstanceIDStringEncoding description](struct FIRInstanceIDStringEncoding *self, SEL);
bool __cdecl -[FIRInstanceIDStringEncoding doPad](struct FIRInstanceIDStringEncoding *self, SEL);
void __cdecl -[FIRInstanceIDStringEncoding setDoPad:](struct FIRInstanceIDStringEncoding *self, SEL, bool);
void __cdecl -[FIRInstanceIDStringEncoding setPaddingChar:](struct FIRInstanceIDStringEncoding *self, SEL, char);
id __cdecl -[FIRInstanceIDStringEncoding encode:](struct FIRInstanceIDStringEncoding *self, SEL, id);
id __cdecl -[FIRInstanceIDStringEncoding decode:](struct FIRInstanceIDStringEncoding *self, SEL, id);
void __cdecl -[FIRInstanceIDStringEncoding .cxx_destruct](struct FIRInstanceIDStringEncoding *self, SEL);
// void *__cdecl memset(void *, int, size_t);
// int __fastcall objc_autoreleaseReturnValue(_QWORD); weak
// void *objc_msgSend(void *, const char *, ...); idb
// void *objc_msgSendSuper2(void *, const char *, ...); idb
// int __fastcall objc_retainAutorelease(_QWORD); weak
// int __fastcall objc_retainAutoreleasedReturnValue(_QWORD); weak
// int __fastcall objc_storeStrong(_QWORD, _QWORD); weak
// size_t __cdecl strlen(const char *);

//-------------------------------------------------------------------------
// Data declarations

__CFString cfstr_Abcdefghijklmn =
{
  &__CFConstantStringClassReference,
  1992LL,
  "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",
  64LL
}; // weak
char *selRef_stringEncodingWithString_ = "stringEncodingWithString:"; // weak
void *classRef_FIRInstanceIDStringEncoding = &OBJC_CLASS___FIRInstanceIDStringEncoding; // weak
void *classRef_FIRInstanceIDStringEncoding_0 = &OBJC_CLASS___FIRInstanceIDStringEncoding; // weak
// extern int (__fastcall *objc_release)(_QWORD); weak
// extern int (__fastcall *objc_retain)(_QWORD, _QWORD); weak


//----- (0000000000000000) ----------------------------------------------------
int __fastcall +[FIRInstanceIDStringEncoding rfc4648Base64WebsafeStringEncoding](void *a1)
{
  void *v1; // rax@1
  void *v2; // rax@1
  void *v3; // rbx@1

  v1 = objc_msgSend(a1, selRef_stringEncodingWithString_, &cfstr_Abcdefghijklmn);
  LODWORD(v2) = objc_retainAutoreleasedReturnValue(v1);
  v3 = v2;
  objc_msgSend(v2, *(&selRef_stringEncodingWithString_ + 1), 61LL);
  objc_msgSend(v3, *(&selRef_stringEncodingWithString_ + 2), 1LL);
  return objc_autoreleaseReturnValue(v3);
}
// 738: using guessed type __CFString cfstr_Abcdefghijklmn;
// 910: using guessed type char *selRef_stringEncodingWithString_;
// 4BC8: using guessed type int __fastcall objc_autoreleaseReturnValue(_QWORD);
// 4BF8: using guessed type int __fastcall objc_retainAutoreleasedReturnValue(_QWORD);

//----- (000000000000005A) ----------------------------------------------------
// FIRInstanceIDStringEncoding + (id)stringEncodingWithString:(id) 
id __cdecl +[FIRInstanceIDStringEncoding stringEncodingWithString:](struct FIRInstanceIDStringEncoding *self, SEL a2, id a3)
{
  const char *v3; // r14@1
  __int64 v4; // rax@1
  __int64 v5; // rbx@1
  void *v6; // rax@1
  void *v7; // r14@1
  id result; // rax@1

  v3 = *(&selRef_stringEncodingWithString_ + 3);
  LODWORD(v4) = objc_retain(a3, a2);
  v5 = v4;
  v6 = objc_msgSend(classRef_FIRInstanceIDStringEncoding, v3);
  v7 = objc_msgSend(v6, *(&selRef_stringEncodingWithString_ + 4), v5);
  objc_release(v5);
  LODWORD(result) = objc_autoreleaseReturnValue(v7);
  return result;
}
// 910: using guessed type char *selRef_stringEncodingWithString_;
// 9D8: using guessed type void *classRef_FIRInstanceIDStringEncoding;
// 4BC8: using guessed type int __fastcall objc_autoreleaseReturnValue(_QWORD);
// 4BE0: using guessed type int (__fastcall *objc_release)(_QWORD);
// 4BE8: using guessed type int (__fastcall *objc_retain)(_QWORD, _QWORD);

//----- (00000000000000BB) ----------------------------------------------------
// FIRInstanceIDStringEncoding - (id)initWithString:(id) 
id __cdecl -[FIRInstanceIDStringEncoding initWithString:](struct FIRInstanceIDStringEncoding *self, SEL a2, id a3)
{
  void *v3; // rax@1
  void *v4; // r14@1
  const char *v5; // rsi@1
  void *v6; // r15@1
  void *v7; // rax@2
  __int64 v8; // rax@2
  __int64 v9; // rdi@2
  void *v10; // rdi@2
  unsigned __int64 v11; // r13@3
  struct objc_object *v12; // r12@5
  signed __int64 v13; // rbx@8
  signed int v14; // eax@8
  unsigned __int64 v15; // rdx@8
  __int64 v16; // rdx@9
  int v17; // ecx@11
  unsigned __int64 v18; // rdx@12
  signed int v19; // ecx@16
  signed int v20; // eax@16
  signed int v21; // edx@17
  int v22; // er8@17
  int v23; // edi@18
  int v24; // ebx@18
  struct objc_object *v25; // rax@24
  struct FIRInstanceIDStringEncoding *v27; // [sp+0h] [bp-40h]@1
  void *v28; // [sp+8h] [bp-38h]@1
  void *v29; // [sp+10h] [bp-30h]@3

  LODWORD(v3) = objc_retain(a3, a2);
  v4 = v3;
  v27 = self;
  v28 = classRef_FIRInstanceIDStringEncoding_0;
  v5 = *(&selRef_stringEncodingWithString_ + 5);
  v6 = objc_msgSendSuper2(&v27, v5, self, classRef_FIRInstanceIDStringEncoding_0);
  if ( v6 )
  {
    v7 = objc_msgSend(v4, *(&selRef_stringEncodingWithString_ + 6), 1LL, v27, v28);
    LODWORD(v8) = objc_retainAutoreleasedReturnValue(v7);
    v9 = *((_QWORD *)v6 + 1);
    *((_QWORD *)v6 + 1) = v8;
    objc_release(v9);
    v10 = (void *)*((_QWORD *)v6 + 1);
    if ( v10 )
    {
      v29 = v4;
      *((_QWORD *)v6 + 2) = objc_msgSend(v10, *(&selRef_stringEncodingWithString_ + 7), v27, v28);
      v11 = (unsigned __int64)objc_msgSend(*((void **)v6 + 1), *(&selRef_stringEncodingWithString_ + 8), v27, v28, v29);
      if ( v11 - 2 > 0x7E || v11 & (v11 - 1) )
      {
        v12 = 0LL;
      }
      else
      {
        v13 = (signed __int64)v6 + 24;
        memset((char *)v6 + 24, 255, 0x200uLL);
        v14 = 1;
        v12 = 0LL;
        v15 = 0LL;
        while ( 1 )
        {
          v16 = *(_BYTE *)(*((_QWORD *)v6 + 2) + v15);
          if ( *(_DWORD *)(v13 + 4 * v16) != -1 )
            break;
          v5 = (const char *)(unsigned int)(v14 - 1);
          *(_DWORD *)(v13 + 4 * v16) = (_DWORD)v5;
          v15 = (unsigned int)v14++;
          if ( v15 >= v11 )
          {
            v17 = *((_DWORD *)v6 + 134);
            if ( v11 < 2 )
            {
              v4 = v29;
            }
            else
            {
              v18 = 1LL;
              v4 = v29;
              do
              {
                ++v17;
                v18 *= 2LL;
              }
              while ( v18 < v11 );
              *((_DWORD *)v6 + 134) = v17;
            }
            *((_DWORD *)v6 + 135) = (1 << v17) - 1;
            v19 = *((_DWORD *)v6 + 134);
            v20 = 8;
            if ( v19 != 8 )
            {
              v21 = 8;
              v22 = 0;
              v20 = *((_DWORD *)v6 + 134);
              do
              {
                v23 = v22 - v20;
                v5 = (const char *)(unsigned int)(v22 - v20 + 8);
                v24 = 0;
                while ( v21 >= v20 )
                {
                  v20 += v19;
                  v24 += v19;
                  if ( (_DWORD)v5 == v24 )
                  {
                    v20 = v21;
                    goto LABEL_23;
                  }
                }
                v21 += 8;
                v22 += 8;
              }
              while ( v23 + 16 != v24 );
            }
LABEL_23:
            *((_DWORD *)v6 + 137) = v20 / v19;
            goto LABEL_24;
          }
        }
      }
      v4 = v29;
    }
    else
    {
      v12 = 0LL;
    }
  }
  else
  {
LABEL_24:
    LODWORD(v25) = objc_retain(v6, v5);
    v12 = v25;
  }
  objc_release(v4);
  objc_release(v6);
  return v12;
}
// 910: using guessed type char *selRef_stringEncodingWithString_;
// 9F0: using guessed type void *classRef_FIRInstanceIDStringEncoding_0;
// 4BE0: using guessed type int (__fastcall *objc_release)(_QWORD);
// 4BE8: using guessed type int (__fastcall *objc_retain)(_QWORD, _QWORD);
// 4BF8: using guessed type int __fastcall objc_retainAutoreleasedReturnValue(_QWORD);

//----- (00000000000002A1) ----------------------------------------------------
// FIRInstanceIDStringEncoding - (id)description
id __cdecl -[FIRInstanceIDStringEncoding description](struct FIRInstanceIDStringEncoding *self, SEL a2)
{
  return (id)objc_msgSend(
               *(&classRef_FIRInstanceIDStringEncoding + 1),
               *(&selRef_stringEncodingWithString_ + 9),
               &cfstr_Abcdefghijklmn + 1,
               (unsigned int)(1 << LOBYTE(self->shift_)),
               self->charMapData_);
}
// 738: using guessed type __CFString cfstr_Abcdefghijklmn;
// 910: using guessed type char *selRef_stringEncodingWithString_;
// 9D8: using guessed type void *classRef_FIRInstanceIDStringEncoding;

//----- (00000000000002E7) ----------------------------------------------------
// FIRInstanceIDStringEncoding - (bool)doPad
bool __cdecl -[FIRInstanceIDStringEncoding doPad](struct FIRInstanceIDStringEncoding *self, SEL a2)
{
  return self->doPad_;
}

//----- (00000000000002F7) ----------------------------------------------------
// FIRInstanceIDStringEncoding - (void)setDoPad:(bool) 
void __cdecl -[FIRInstanceIDStringEncoding setDoPad:](struct FIRInstanceIDStringEncoding *self, SEL a2, bool a3)
{
  self->doPad_ = a3;
}

//----- (0000000000000307) ----------------------------------------------------
// FIRInstanceIDStringEncoding - (void)setPaddingChar:(char) 
void __cdecl -[FIRInstanceIDStringEncoding setPaddingChar:](struct FIRInstanceIDStringEncoding *self, SEL a2, char a3)
{
  self->paddingChar_ = a3;
  self->reverseCharMap_[a3] = -2;
}

//----- (0000000000000328) ----------------------------------------------------
// FIRInstanceIDStringEncoding - (id)encode:(id) 
id __cdecl -[FIRInstanceIDStringEncoding encode:](struct FIRInstanceIDStringEncoding *self, SEL a2, id a3)
{
  void *v3; // rax@1
  void *v4; // rbx@1
  const char *v5; // rsi@1
  unsigned __int64 v6; // r15@1
  void *v7; // rax@2
  unsigned __int64 v8; // r12@2
  void *v9; // rax@4
  __int64 v10; // rax@4
  void *v11; // rax@4
  _BYTE *v12; // rax@4
  int v13; // er11@4
  bool v14; // bl@4
  int v15; // ecx@4
  unsigned __int64 v16; // r9@4
  unsigned __int64 v17; // rdx@4
  int v18; // esi@5
  unsigned __int8 v19; // of@5
  int v20; // esi@5
  int v21; // esi@7
  signed __int64 v22; // rcx@11
  void *v23; // rax@16
  __CFString *v24; // r14@16
  id result; // rax@18
  void *v26; // [sp+0h] [bp-40h]@2
  _BYTE *v27; // [sp+0h] [bp-40h]@4
  void *v28; // [sp+8h] [bp-38h]@2
  void *v29; // [sp+10h] [bp-30h]@4

  LODWORD(v3) = objc_retain(a3, a2);
  v4 = v3;
  v5 = *(&selRef_stringEncodingWithString_ + 8);
  v6 = (unsigned __int64)objc_msgSend(v3, v5);
  if ( v6 )
  {
    v28 = v4;
    LODWORD(v7) = objc_retainAutorelease(v4);
    v26 = objc_msgSend(v7, *(&selRef_stringEncodingWithString_ + 7));
    v8 = (self->shift_ + 8 * v6 - 1) / self->shift_;
    if ( self->doPad_ )
      v8 = v8 + self->padLen_ - 1 - (v8 + self->padLen_ - 1) % self->padLen_;
    v9 = objc_msgSend(*(&classRef_FIRInstanceIDStringEncoding + 2), *(&selRef_stringEncodingWithString_ + 10), v8, v26);
    LODWORD(v10) = objc_retainAutoreleasedReturnValue(v9);
    LODWORD(v11) = objc_retainAutorelease(v10);
    v29 = v11;
    v12 = objc_msgSend(v11, *(&selRef_stringEncodingWithString_ + 11));
    v13 = *v27;
    v14 = v6 > 1;
    v15 = 8;
    v16 = 1LL;
    v17 = 0LL;
    do
    {
      v18 = self->shift_;
      v19 = __OFSUB__(v18, v15);
      v20 = v18 - v15;
      if ( !((unsigned __int8)((v20 < 0) ^ v19) | (v20 == 0)) )
      {
        if ( v14 )
        {
          v21 = v27[v16++];
          v13 = v21 | (v13 << 8);
          v15 += 8;
        }
        else
        {
          v13 <<= v20;
          v15 = self->shift_;
        }
      }
      v15 -= self->shift_;
      v12[v17++] = self->charMap_[self->mask_ & (v13 >> v15)];
      v14 = v16 < v6;
    }
    while ( v16 < v6 || v15 > 0 );
    v22 = 544LL;
    if ( self->doPad_ && v17 < v8 )
    {
      v22 = 545LL;
      do
        v12[v17++] = self->paddingChar_;
      while ( v8 != v17 );
      v17 = v8;
    }
    v4 = v28;
    objc_msgSend(v29, *(&selRef_stringEncodingWithString_ + 12), v17, v22);
    v23 = objc_msgSend(*(&classRef_FIRInstanceIDStringEncoding + 1), *(&selRef_stringEncodingWithString_ + 3));
    v24 = (__CFString *)objc_msgSend(v23, *(&selRef_stringEncodingWithString_ + 13), v29, 1LL);
    objc_release(v29);
  }
  else
  {
    v24 = &cfstr_Abcdefghijklmn + 2;
    objc_retain(&cfstr_Abcdefghijklmn + 2, v5);
  }
  objc_release(v4);
  LODWORD(result) = objc_autoreleaseReturnValue(v24);
  return result;
}
// 738: using guessed type __CFString cfstr_Abcdefghijklmn;
// 910: using guessed type char *selRef_stringEncodingWithString_;
// 9D8: using guessed type void *classRef_FIRInstanceIDStringEncoding;
// 4BC8: using guessed type int __fastcall objc_autoreleaseReturnValue(_QWORD);
// 4BE0: using guessed type int (__fastcall *objc_release)(_QWORD);
// 4BE8: using guessed type int (__fastcall *objc_retain)(_QWORD, _QWORD);
// 4BF0: using guessed type int __fastcall objc_retainAutorelease(_QWORD);
// 4BF8: using guessed type int __fastcall objc_retainAutoreleasedReturnValue(_QWORD);

//----- (0000000000000529) ----------------------------------------------------
// FIRInstanceIDStringEncoding - (id)decode:(id) 
id __cdecl -[FIRInstanceIDStringEncoding decode:](struct FIRInstanceIDStringEncoding *self, SEL a2, id a3)
{
  __int64 v3; // rax@0
  __int64 v4; // ST00_8@1
  id v5; // rbx@1
  struct FIRInstanceIDStringEncoding *v6; // r15@1
  __int64 v7; // rax@1
  __int64 v8; // r14@1
  void *v9; // rax@1
  const char *v10; // r13@1
  size_t v11; // rax@2
  size_t v12; // r12@2
  void *v13; // rax@2
  __int64 v14; // rax@2
  void *v15; // rax@2
  void *v16; // rbx@2
  _BYTE *v17; // rax@2
  __int64 v18; // rcx@2
  char *v19; // r9@3
  size_t v20; // rdi@3
  char v21; // r10@3
  unsigned int v22; // esi@3
  int v23; // er14@3
  __int64 v24; // rdx@3
  int v25; // ebx@4
  __int64 v26; // r14@15
  const char *v27; // rsi@17
  __int64 v28; // rax@17
  id result; // rax@21
  void *v30; // [sp+0h] [bp-30h]@1

  v4 = v3;
  v5 = a3;
  v6 = self;
  LODWORD(v7) = objc_retain(a3, a2);
  v8 = v7;
  LODWORD(v9) = objc_retainAutorelease(v5);
  v10 = (const char *)objc_msgSend(v9, *(&selRef_stringEncodingWithString_ + 14), 1LL, v4);
  objc_release(v8);
  if ( v10 )
  {
    v11 = strlen(v10);
    v12 = v11;
    v13 = objc_msgSend(
            *(&classRef_FIRInstanceIDStringEncoding + 2),
            *(&selRef_stringEncodingWithString_ + 10),
            v11 * self->shift_ >> 3);
    LODWORD(v14) = objc_retainAutoreleasedReturnValue(v13);
    LODWORD(v15) = objc_retainAutorelease(v14);
    v16 = v15;
    v17 = objc_msgSend(v15, *(&selRef_stringEncodingWithString_ + 11));
    if ( v12 )
    {
      v30 = v16;
      v19 = (char *)self->reverseCharMap_;
      v20 = 0LL;
      v21 = 0;
      v22 = 0;
      v23 = 0;
      v24 = 0LL;
      do
      {
        v18 = v10[v20];
        v25 = *(_DWORD *)&v19[4 * v18];
        if ( v25 != -3 )
        {
          if ( v25 == -2 )
          {
            v21 = 1;
          }
          else
          {
            if ( v25 == -1 || v21 & 1 )
            {
              v16 = v30;
LABEL_19:
              v26 = 0LL;
              goto LABEL_20;
            }
            v18 = v6->shift_;
            v23 = (v23 << v18) | v6->mask_ & v25;
            v22 += v18;
            if ( (signed int)v22 >= 8 )
            {
              v22 -= 8;
              v18 = v22;
              v17[v24++] = v23 >> v22;
            }
          }
        }
        ++v20;
      }
      while ( v20 < v12 );
      if ( v22 )
      {
        v18 = v22;
        v16 = v30;
        if ( !(v23 & ((1 << v22) - 1)) )
          goto LABEL_17;
        goto LABEL_19;
      }
      v16 = v30;
    }
    else
    {
      v24 = 0LL;
    }
LABEL_17:
    v27 = *(&selRef_stringEncodingWithString_ + 12);
    objc_msgSend(v16, v27, v24, v18, v30);
    LODWORD(v28) = objc_retain(v16, v27);
    v26 = v28;
LABEL_20:
    objc_release(v16);
  }
  else
  {
    v26 = 0LL;
  }
  LODWORD(result) = objc_autoreleaseReturnValue(v26);
  return result;
}
// 910: using guessed type char *selRef_stringEncodingWithString_;
// 9D8: using guessed type void *classRef_FIRInstanceIDStringEncoding;
// 4BC8: using guessed type int __fastcall objc_autoreleaseReturnValue(_QWORD);
// 4BE0: using guessed type int (__fastcall *objc_release)(_QWORD);
// 4BE8: using guessed type int (__fastcall *objc_retain)(_QWORD, _QWORD);
// 4BF0: using guessed type int __fastcall objc_retainAutorelease(_QWORD);
// 4BF8: using guessed type int __fastcall objc_retainAutoreleasedReturnValue(_QWORD);

//----- (00000000000006C8) ----------------------------------------------------
// FIRInstanceIDStringEncoding - (void).cxx_destruct
void __cdecl -[FIRInstanceIDStringEncoding .cxx_destruct](struct FIRInstanceIDStringEncoding *self, SEL a2)
{
  objc_storeStrong(&self->charMapData_, 0LL);
}
// 4C00: using guessed type int __fastcall objc_storeStrong(_QWORD, _QWORD);

// ALL OK, 10 function(s) have been successfully decompiled
